---
import { loadQuery } from "../sanity/lib/load-query";
import Layout from "../layouts/Layout.astro";
import ApplicationCard from "../components/ApplicationCard.astro";
import InfoCard from "../components/InfoCard.astro";
import OurText from "../components/OurText.astro";
import Button from "../components/Button.astro";

interface AdoptionItem {
  title: string;
  bulletPoints: string[];
}

// Fetch specific adoption items by title
const { data: adoptionItem1 } = await loadQuery<AdoptionItem>({
  query: `*[_type == "adoption" && title == "Requirements"][0]{title, bulletPoints}`,
});

const { data: adoptionItem2 } = await loadQuery<AdoptionItem>({
  query: `*[_type == "adoption" && title == "Adoption Process"][0]{title, bulletPoints}`,
});

const { data: adoptionItem3 } = await loadQuery<AdoptionItem>({
  query: `*[_type == "adoption" && title == "Adoption Fees"][0]{title, bulletPoints}`,
});

const { data: adoptionItem4 } = await loadQuery<AdoptionItem>({
  query: `*[_type == "adoption" && title == "Dewormers and preventatives"][0]{title, bulletPoints}`,
});

const { data: adoptionItem5 } = await loadQuery<AdoptionItem>({
  query: `*[_type == "adoption" && title == "Tests, vaccines, surgery"][0]{title, bulletPoints}`,
});

const { data: formUrl } = await loadQuery<{ formUrl: string }>({
  query: `*[_type == "googleForm" && title == "Adoption Form"][0]{formUrl}`,
});
---

<Layout title="Adopt a Cat">
  <!-- Hero Section -->
  <div class="bg-gradient-to-r from-beige-100 to-beige-200 py-8 md:py-12">
    <div class="max-w-7xl mx-auto px-4 md:px-8 text-center">
      <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-2 md:mb-4 text-gray-800">
        Adoption Process
      </h1>
      <p class="text-base md:text-lg lg:text-xl max-w-3xl mx-auto mb-4 md:mb-6 text-gray-700">
        Take home a furry friend and start a lifetime of love and companionship.
      </p>
      <div class="flex justify-center">
        <Button
          label="View Available Cats"
          href="/cats"
          variant="primary"
          size="large"
        />
      </div>
    </div>
  </div>

  <div class="max-w-7xl mx-auto px-4 md:px-8 py-8 md:py-12">
    <!-- Introduction Section -->
    <div class="bg-white rounded-xl shadow-md p-5 md:p-8 mb-8 md:mb-12">
      <div class="flex flex-col md:flex-row items-center gap-5 md:gap-8">
        <div class="md:w-1/2">
          <h2 class="text-2xl md:text-3xl font-bold mb-3 md:mb-4 text-gray-800">Why Adopt?</h2>
          <p class="text-gray-700 text-sm md:text-base mb-3 md:mb-4">
            When you adopt a cat from Koko's Rescue, you're giving a second
            chance to a cat in need. Our cats have been rescued, rehabilitated,
            and are now ready for their forever homes.
          </p>
          <p class="text-gray-700 text-sm md:text-base">
            Each adoption helps us continue our mission of rescuing more cats
            and providing them with the care they need until they find loving
            homes.
          </p>
        </div>
        <div class="md:w-1/2">
          <img
            src="/images/cat-family-bro.svg"
            alt="Cat Adoption"
            class="w-full max-w-md mx-auto rounded-lg"
          />
        </div>
      </div>
    </div>

    <!-- Process Steps Section -->
    <div class="mb-10 md:mb-16">
      <h2 class="text-2xl md:text-3xl font-bold text-center mb-6 md:mb-10 text-gray-800">
        Adoption Process
      </h2>
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 md:gap-8">
        <InfoCard
          icon="/images/icons8-requirement.webp"
          title={adoptionItem1.title}
          bulletPoints={adoptionItem1.bulletPoints}
          className="shadow-orange transform transition-transform hover:scale-105"
        />
        <InfoCard
          icon="/images/icons8-paper.webp"
          title={adoptionItem2.title}
          bulletPoints={adoptionItem2.bulletPoints}
          className="shadow-blue transform transition-transform hover:scale-105"
        />
        <InfoCard
          icon="/images/icons8-fee.webp"
          title={adoptionItem3.title}
          bulletPoints={adoptionItem3.bulletPoints}
          className="shadow-yellow transform transition-transform hover:scale-105"
        />
      </div>
    </div>

    <!-- Medical Care Section -->
    <div
      class="bg-gradient-to-r from-beige-100 to-beige-200 rounded-xl p-5 md:p-8 mb-10 md:mb-16"
    >
      <h2 class="text-2xl md:text-3xl font-bold text-center mb-4 md:mb-8 text-gray-800">
        Complete Medical Care
      </h2>
      <p class="text-center text-sm md:text-base lg:text-lg mb-6 md:mb-8 text-gray-700">
        Every cat adopted from Koko's Rescue receives comprehensive medical
        care:
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8">
        <InfoCard
          icon="/images/icons8-drug.webp"
          title={adoptionItem4.title}
          bulletPoints={adoptionItem4.bulletPoints}
          className="shadow-green transform transition-transform hover:scale-105"
        />
        <InfoCard
          icon="/images/icons8-vaccine.webp"
          title={adoptionItem5.title}
          bulletPoints={adoptionItem5.bulletPoints}
          className="shadow-purple transform transition-transform hover:scale-105"
        />
      </div>
    </div>

    <!-- Application Form Section with ID for scroll target -->
    <div id="application-form">
      <ApplicationCard title="Adoption" formUrl={formUrl.formUrl} />
    </div>

    <!-- Success Stories Callout - after application -->
    <div class="mt-12 bg-gradient-to-r from-olive-50 to-beige-100 rounded-xl p-6 border border-olive-200">
      <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
        <div class="flex items-center gap-4">
          <span class="text-4xl">üê±</span>
          <div>
            <h3 class="text-lg font-semibold text-gray-800">See Our Happy Adoptions</h3>
            <p class="text-sm text-gray-600">Read heartwarming stories from families who've adopted from us.</p>
          </div>
        </div>
        <Button
          label="Success Stories"
          href="/success-stories"
          variant="secondary"
          size="medium"
        />
      </div>
    </div>
  </div>
</Layout>

<style>
  /* Smooth scrolling for anchor links */
  html {
    scroll-behavior: smooth;
  }

  .bg-gradient-to-r {
    position: relative;
    overflow: hidden;
  }

  .bg-gradient-to-r::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: url("/images/paw-pattern.svg");
    background-size: 200px;
    opacity: 0.05;
    z-index: 0;
  }

  .bg-gradient-to-r > * {
    position: relative;
    z-index: 1;
  }
</style>
